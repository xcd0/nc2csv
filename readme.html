<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta http-equiv="refresh" content="9; URL=">
<style type="text/css"><!--

/* build in css*/
body{font-family:Helvetica,arial,sans-serif;font-size:14px;line-height:1.8;padding:30px;background-color:#fff;color:#333}body>:first-child{margin-top:0!important}body>:last-child{margin-bottom:0!important}a{color:#4183c4;text-decoration:none}a.absent{color:#c00}a.anchor{display:block;padding-left:30px;margin-left:-30px;cursor:pointer;position:absolute;top:0;left:0;bottom:0x}h1,h2,h3,h4,h5,h6{margin:20px 0 10px;padding:0;font-weight:700;-webkit-font-smoothing:antialiased;cursor:text;position:relative}h1:first-child,h1:first-child+h2,h2:first-child,h3:first-child,h4:first-child,h5:first-child,h6:first-child{margin-top:0;padding-top:0}h1:hover a.anchor,h2:hover a.anchor,h3:hover a.anchor,h4:hover a.anchor,h5:hover a.anchor,h6:hover a.anchor{text-decoration:none}h1 code,h1 tt,h2 code,h2 tt,h3 code,h3 tt,h4 code,h4 tt,h5 code,h5 tt,h6 code,h6 tt{font-size:inherit}h1{font-size:34px;margin-bottom:40px;padding-bottom:0}h1,h2{color:#000}h2{font-size:30px;border-bottom:2px solid #ccc}h3{font-size:24px;border-bottom:1px solid #ddd}h4{font-size:20px}h5{font-size:18px}h6{font-size:16px;color:#777}blockquote,dl,li,ol,p,pre,table,ul{margin:10px 0}hr{border:0 0 0;height:4px;padding:0}a:first-child h1,a:first-child h2,a:first-child h3,a:first-child h4,a:first-child h5,a:first-child h6,bo dy>h5:first-child,body>h1:first-child,body>h1:first-child+h2,body>h2:first-child,body>h3:first-child,body>h4:first-child,body>h6:first-child{margin-top:0;padding-top:0}h1 p,h2 p,h3 p,h4 p,h5 p,h6 p{margin-top:0}li p.first{display:inline-block}ol,ul{padding-left:30px}ol:first-child,ul:first-child{margin-top:0}dl,dl dt{padding:0}dl dt{font-size:14px;font-weight:700;font-weight:1400;font-style:italic;margin:15px 0 5px}dl dt:first-child{padding:0}dl dt>:first-child{margin-top:0}dl dt>:last-child{margin-bottom:0}dl dd{margin:0 0 15px;padding:0 15px}dl dd>:first-child{margin-top:0}dl dd>:last-child{margin-bottom:0}blockquote{border-left:4px solid #ddd;padding:0 15px;color:#777}blockquote>:first-child{margin-top:0}blockquote>:last-child{margin-bottom:0}table{padding:0;border-spacing:2px;border-collapse:collapse;width:80%;margin:auto}table,td,th{border:1px solid #ccc}td,th{padding:0;margin:0}table tr{background-color:#fff;border-top:1px solid #c6cbd1;margin:0;padding:0}table tr:nth-child(2n){background-color:#f6f8fa}table tr th{font-weight:700}table tr td,table tr th{border:1px solid #ccc;margin:0;padding:6px 13px}table tr td:first-child,table tr th:first-child{margin-top:0}img{max-width:100%}code,tt{margin:0 2px;padding:0 5px;white-space:nowrap;border:1px solid #eaeaea;background-color:#f8f8f8;border-radius:3px}pre code{margin:0;padding:0;white-space:pre;border:0;background:0 0}.highlight pre,pre{border:1px solid #ccc;font-size:13px;line-height:19px;overflow:auto;padding:6px 10px;border-radius:3px}pre code,pre tt{background-color:transparent;border:0}.main-content{max-width:50pc;margin:auto;padding-bottom:50px}hr{border:0!important;color:#fff;height:4px}.page_num{border:0;position:absolute;right:10;bottom:10}
--></style>

<script>
MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']]
  }
};
</script>

<!-- オンラインの時 -->
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script>

<!-- オフラインの時 -->
<script id="MathJax-script" async src="MathJax-3.0.0/es5/tex-mml-chtml.js"></script>


</head>
<body>
<h1 id="ncプログラム分析器">NCプログラム分析器</h1>

<p>NCプログラムを読み込み、分析して、各軸座標位置、各行の送り速度、移動時間 を出力する。</p>

<ul>
<li>in : nc プログラム (テキストファイル、拡張子不定)<br />
</li>
<li>out : 1行ごとの各軸の動作、送り速度の解析結果 (csv または同等の表現をできる一般的なフォーマット)<br />
gui はつけてもつけなくてもいいが、必須ではない。</li>
</ul>

<p>出力データの1行 (解析用に項目追加可能性あり)</p>

<pre><code>元ncプログラムの行、XYZABC の各位置、プログラムの F、XYZABC の各軸速度、移動に要する時間
</code></pre>

<p>初期値未指定などの場合は、わかりませんの意で不定値を書く。</p>

<p><code>./20191226_設計 #3206_ ncプログラム解析器 - 岡田 - CAM開発部.pdf</code> を元に作成する。</p>

<p>外部仕様書は<code>./specification.md</code>を見ること。</p>

<h2 id="windowsにおける環境設定">Windowsにおける環境設定</h2>

<ol>
<li><p>シェルを用意
なんでもよい。おおむね4パターン方法がある。</p>

<ul>
<li><p>Msys2(<a href="http://www.msys2.org/">http://www.msys2.org/</a>)</p>

<ol>
<li><a href="http://repo.msys2.org/distrib/x86_64/msys2-x86_64-20190524.exe">MSYS2 http://repo.msys2.org/distrib/x86_64/msys2-x86_64-20190524.exe</a> からダウンロードしてインストール。</li>
<li><code>pacman -Syuu</code> を実行し、アップデートする。</li>
<li>アップデート完了後、英語で一旦Msysを再起動せよとメッセージが出るので、<br />
ウィンドウを×ボタンで閉じて再度開く。</li>
<li><code>pacman -S git make wget</code> でgitとmakeを入れる。vimなど必要があれば入れる。</li>
</ol></li>

<li><p>WSL (StoreアプリからUbuntu等をインストールする)</p>

<ol>
<li>OSの初期設定は検索して行う。</li>
<li>初期設定が終わったら、gitとmake、wgetを入れる。<br />
ubuntuなら<code>sudo apt update</code> してパッケージリストをアップデートしたのちに <code>sudo apt install git make wget</code></li>
</ol></li>

<li><p>仮想マシン
お好きなようにどうぞ
対応しているOSはwindows, mac, linux, freeBSDです。</p></li>

<li><p>単純にインストール(お勧めしない)</p>

<ol>
<li>公式サイトからインストーラーをインストール。</li>
<li>コマンドプロンプトやPowershellなどで利用する。(これがしんどい)</li>
</ol></li>
</ul></li>

<li><p>Goのコンパイラのインストール</p>

<p>./go_compiler_install.sh というシェルスクリプトを用意しているので実行する。</p>

<ul>
<li><p><code>./go_compiler_install.sh -v go1.13.6 -f -p</code> で $HOME/work/go 以下にインストールされる。<br />
インストール先を変えたい場合は <code>./go_compiler_install.sh -h</code> でヘルプを見ること。</p>

<ul>
<li>インストールが終わったら<code>source .bashrc</code>などを実行するか、シェルを再起動すること。<br />
環境変数を読み込む必要がある。</li>
</ul></li>

<li><p>オプションが不明な場合、引数なしで<code>./go_compiler_install.sh</code> のようにたたけばヘルプが出る。</p></li>

<li><p><code>./go_compiler_install.sh -i</code> で対話的にインストールできる。</p></li>
</ul></li>
</ol>

<h2 id="ビルド">ビルド</h2>

<p>Goは基本的に <code>go build</code> だけでビルドできる。
この場合main関数のあるディレクトリの名前で実行ファイルが生成される。</p>

<p>更にMakefileも用意しているので <code>make</code> でもビルドできる。
Makefileでは、 生成される実行ファイルをソースコードから分けて生成したかったので、
別ディレクトリに生成するようにしている。</p>

<ol>
<li><p>ソースコードは各プログラムのディレクトリ内にsrcディレクトリがあり、そこにまとめている。
このsrcディレクトリにカレントディレクトリを移す。</p></li>

<li><p>makefileを用意しているので <code>make</code> すればビルドできる。</p></li>

<li><p>../build ディレクトリに実行ファイルができる。
<code>make run</code> で一応src/testにあるNCテキストファイルを使って実行する。</p></li>
</ol>

<h3 id="ビルドと実行の例">ビルドと実行の例</h3>

<p>例えばNCをGoのソースコードに変換していたプログラムは./nc2go/srcにある。</p>

<ol>
<li><code>cd ./nc2go/src</code></li>
<li><code>make</code><br />
これで./nc2go/buildに実行ファイルが生成される。</li>
<li><code>make run</code><br />
これでmakefileに書いてある適当なNCプログラムが変換され、出力される。</li>
</ol>

<h2 id="実行">実行</h2>

<p>現状第一引数にNCの書かれたテキストファイルを与えると実行する。</p>

<p>NCプログラムの書かれたテキストファイルを実行ファイルにD&amp;Dしてもよい。</p>

<h3 id="入力ファイル形式">入力ファイル形式</h3>

<p>文字コードはBOMなしUTF-8を推奨。
改行コードはLFを推奨。</p>

</body>
</html>